{"ast":null,"code":"import _objectSpread from\"D:/JK/JKapp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./admin.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=\"http://localhost:8000\";function AdminBookings(_ref){let{token,onLogout}=_ref;const[bookings,setBookings]=useState([]);const[editId,setEditId]=useState(null);const[editForm,setEditForm]=useState({name:\"\",phone:\"\",car:\"\",date:\"\",time:\"\"});const fetchBookings=async()=>{const res=await axios.get(\"\".concat(API_URL,\"/bookings\"),{headers:{Authorization:\"Bearer \".concat(token)}});setBookings(res.data);};useEffect(()=>{fetchBookings();// eslint-disable-next-line\n},[]);const handleEdit=booking=>{setEditId(booking._id);setEditForm({name:booking.name,phone:booking.phone,car:booking.car,date:booking.date,time:booking.time});};const handleEditChange=e=>{setEditForm(_objectSpread(_objectSpread({},editForm),{},{[e.target.name]:e.target.value}));};const handleEditSubmit=async e=>{e.preventDefault();await axios.put(\"\".concat(API_URL,\"/bookings/\").concat(editId),editForm,{headers:{Authorization:\"Bearer \".concat(token)}});setEditId(null);fetchBookings();};const handleCancelEdit=()=>{setEditId(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-bookings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin - Bookings\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20,justifyContent:'center'},children:bookings.map(b=>/*#__PURE__*/_jsx(\"div\",{className:\"booking-card\",children:editId===b._id?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSubmit,style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:editForm.name,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",value:editForm.phone,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"car\",value:editForm.car,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"date\",type:\"date\",value:editForm.date,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"time\",type:\"time\",value:editForm.time,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:6},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"L\\u01B0u\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancelEdit,style:{background:'#757575'},children:\"H\\u1EE7y\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Kh\\xE1ch:\"}),\" \",b.name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0110i\\u1EC7n tho\\u1EA1i:\"}),\" \",b.phone]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Xe:\"}),\" \",b.car]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Ng\\xE0y:\"}),\" \",b.date]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Gi\\u1EDD:\"}),\" \",b.time]}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn\",onClick:()=>handleEdit(b),style:{marginTop:10},children:\"Edit\"})]})},b._id))}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn-fixed\",onClick:onLogout,children:\"Logout\"})]});}export default AdminBookings;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","AdminBookings","_ref","token","onLogout","bookings","setBookings","editId","setEditId","editForm","setEditForm","name","phone","car","date","time","fetchBookings","res","get","concat","headers","Authorization","data","handleEdit","booking","_id","handleEditChange","e","_objectSpread","target","value","handleEditSubmit","preventDefault","put","handleCancelEdit","className","children","style","display","flexWrap","gap","justifyContent","map","b","onSubmit","flexDirection","onChange","required","type","marginTop","onClick","background"],"sources":["D:/JK/JKapp/frontend/admin/src/AdminBookings.js"],"sourcesContent":["\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./admin.css\";\r\n\r\nconst API_URL = \"http://localhost:8000\";\r\n\r\nfunction AdminBookings({ token, onLogout }) {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [editId, setEditId] = useState(null);\r\n  const [editForm, setEditForm] = useState({ name: \"\", phone: \"\", car: \"\", date: \"\", time: \"\" });\r\n\r\n  const fetchBookings = async () => {\r\n    const res = await axios.get(`${API_URL}/bookings`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    setBookings(res.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const handleEdit = (booking) => {\r\n    setEditId(booking._id);\r\n    setEditForm({\r\n      name: booking.name,\r\n      phone: booking.phone,\r\n      car: booking.car,\r\n      date: booking.date,\r\n      time: booking.time,\r\n    });\r\n  };\r\n\r\n  const handleEditChange = (e) => {\r\n    setEditForm({ ...editForm, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleEditSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await axios.put(`${API_URL}/bookings/${editId}`, editForm, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    setEditId(null);\r\n    fetchBookings();\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditId(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-bookings\">\r\n      <h2>Admin - Bookings</h2>\r\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: 20, justifyContent: 'center' }}>\r\n        {bookings.map((b) => (\r\n          <div key={b._id} className=\"booking-card\">\r\n            {editId === b._id ? (\r\n              <form onSubmit={handleEditSubmit} style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\r\n                <input name=\"name\" value={editForm.name} onChange={handleEditChange} required />\r\n                <input name=\"phone\" value={editForm.phone} onChange={handleEditChange} required />\r\n                <input name=\"car\" value={editForm.car} onChange={handleEditChange} required />\r\n                <input name=\"date\" type=\"date\" value={editForm.date} onChange={handleEditChange} required />\r\n                <input name=\"time\" type=\"time\" value={editForm.time} onChange={handleEditChange} required />\r\n                <div style={{ display: 'flex', gap: 8, marginTop: 6 }}>\r\n                  <button type=\"submit\">Lưu</button>\r\n                  <button type=\"button\" onClick={handleCancelEdit} style={{ background: '#757575' }}>Hủy</button>\r\n                </div>\r\n              </form>\r\n            ) : (\r\n              <>\r\n                <div><b>Khách:</b> {b.name}</div>\r\n                <div><b>Điện thoại:</b> {b.phone}</div>\r\n                <div><b>Xe:</b> {b.car}</div>\r\n                <div><b>Ngày:</b> {b.date}</div>\r\n                <div><b>Giờ:</b> {b.time}</div>\r\n                <button className=\"edit-btn\" onClick={() => handleEdit(b)} style={{ marginTop: 10 }}>Edit</button>\r\n              </>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <button className=\"logout-btn-fixed\" onClick={onLogout}>Logout</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminBookings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}